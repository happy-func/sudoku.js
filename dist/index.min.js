!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["js-sudoku"]={})}(this,(function(t){"use strict";function e(){let t=[];for(let e=0;e<9;e++){let e=[];for(let t=0;t<9;t++)e.push(0);t.push(e)}return t}const r=t=>{let n=e();const s=[[0,0],[1,1],[0,1],[2,2],[0,2],[2,0],[1,0],[1,2],[2,1]];for(let i=0;i<9;i++)try{o({position:s[i],processList:n})}catch(o){return n=e(),r(t)}const i=n.reduce(((t,e)=>{const r=e.reduce(((t,e)=>(t.push(e),t)),[]);return t.push(r),t}),[]);if(t.mask){const t=5;for(let e=0;e<9;e++){let r=0;for(let o=0;o<9;o++)i[e][o]>0&&r<t&&Math.floor(9*Math.random())+1<t?(r+=1,i[e][o]=0):0===i[e][o]&&(r+=1),o+1===9&&r<t&&--e}}return t.gzip?i.map((t=>t.map((t=>t.toString())).join("."))).join(","):i},o=({position:t,processList:e})=>{let[r,o]=t;r*=3,o*=3;n([r,o]).forEach((t=>{e[t[0]][t[1]]||(e[t[0]][t[1]]=s({position:t,processList:e}))}))},n=t=>{const[e,r]=t,o=3*Math.floor(e/3),n=3*Math.floor(r/3);let s=[];for(let t=0;t<3;t++)for(let e=0;e<3;e++)s.push([o+t,n+e]);return s},s=({position:t,processList:e})=>{const[r,o]=t;let n=[];for(let s=1;s<=9;s++)i({x:r,val:s,processList:e})&&f({y:o,val:s,processList:e})&&l({position:t,val:s,processList:e})&&n.push(s);if(!n.length)throw new Error("不存在有效值");return n[Math.floor(Math.random()*n.length)]},i=({x:t,val:e,processList:r})=>{let o=!0;for(let n=0;n<9;n++)if(r[t][n]===e){o=!1;break}return o},f=({y:t,val:e,processList:r})=>{let o=!0;for(let n=0;n<9;n++)if(r[n][t]===e){o=!1;break}return o},l=({position:t,val:e,processList:r})=>{let o=!0;const s=n(t);let i=[];for(let t=0;t<9;t++)r[s[t][0]][s[t][1]]&&i.push(r[s[t][0]][s[t][1]]);return-1!=i.indexOf(e)&&(o=!1),o},c=t=>{const e={mask:!!(null==t?void 0:t.mask),gzip:!!(null==t?void 0:t.gzip)};try{return r(e)}catch(t){return c(e)}};t.gen=c,t.verify=t=>{let e=!0,r=[1,2,3,4,5,6,7,8,9],o=[1,2,3,4,5,6,7,8,9],s=[1,2,3,4,5,6,7,8,9];const i=[[0,0],[1,1],[0,1],[2,2],[0,2],[2,0],[1,0],[1,2],[2,1]];try{i.forEach((([e,r])=>{if(n([e,r]).forEach((e=>{if(-1===s.indexOf(t[e[0]][e[1]]))throw new Error("区域内容不合法");s.splice(s.indexOf(t[e[0]][e[1]]),1)})),s.length)throw new Error("区域内容不合法");s=[1,2,3,4,5,6,7,8,9]})),t.forEach(((e,n)=>{if(e.forEach(((e,s)=>{if(!e)throw new Error("内容不合法");if(-1===r.indexOf(t[n][s]))throw new Error("行内容不合法");if(r.splice(r.indexOf(t[n][s]),1),-1===o.indexOf(t[s][n]))throw new Error("列内容不合法");o.splice(o.indexOf(t[s][n]),1)})),r.length)throw new Error("行内容不合法");if(r=[1,2,3,4,5,6,7,8,9],o.length)throw new Error("列内容不合法");o=[1,2,3,4,5,6,7,8,9]}))}catch(t){e=!1}return e},Object.defineProperty(t,"__esModule",{value:!0})}));
