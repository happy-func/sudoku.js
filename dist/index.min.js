!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["js-sudoku"]={})}(this,(function(e){"use strict";function t(){let e=[];for(let t=0;t<9;t++){let t=[];for(let e=0;e<9;e++)t.push(0);e.push(t)}return e}const r=({mask:e,gzip:s})=>{let n=t();const i=[[0,0],[1,1],[0,1],[2,2],[0,2],[2,0],[1,0],[1,2],[2,1]];for(let s=0;s<9;s++)try{o({position:i[s],processList:n})}catch(o){return n=t(),r({mask:e})}const f=n.reduce(((e,t)=>{const r=t.reduce(((e,t)=>(e.push(t),e)),[]);return e.push(r),e}),[]);if(e){const e=5;for(let t=0;t<9;t++){let r=0;for(let o=0;o<9;o++)f[t][o]>0&&r<e&&Math.floor(9*Math.random())+1<e?(r+=1,f[t][o]=0):0===f[t][o]&&(r+=1),o+1===9&&r<e&&--t}}return s?f.map((e=>e.map((e=>e.toString())).join("."))).join(","):f},o=({position:e,processList:t})=>{let[r,o]=e;r*=3,o*=3;s([r,o]).forEach((e=>{t[e[0]][e[1]]||(t[e[0]][e[1]]=n({position:e,processList:t}))}))},s=e=>{const[t,r]=e,o=3*Math.floor(t/3),s=3*Math.floor(r/3);let n=[];for(let e=0;e<3;e++)for(let t=0;t<3;t++)n.push([o+e,s+t]);return n},n=({position:e,processList:t})=>{const[r,o]=e;let s=[];for(let n=1;n<=9;n++)i({x:r,val:n,processList:t})&&f({y:o,val:n,processList:t})&&l({position:e,val:n,processList:t})&&s.push(n);if(!s.length)throw new Error("不存在有效值");return s[Math.floor(Math.random()*s.length)]},i=({x:e,val:t,processList:r})=>{let o=!0;for(let s=0;s<9;s++)if(r[e][s]===t){o=!1;break}return o},f=({y:e,val:t,processList:r})=>{let o=!0;for(let s=0;s<9;s++)if(r[s][e]===t){o=!1;break}return o},l=({position:e,val:t,processList:r})=>{let o=!0;const n=s(e);let i=[];for(let e=0;e<9;e++)r[n[e][0]][n[e][1]]&&i.push(r[n[e][0]][n[e][1]]);return-1!=i.indexOf(t)&&(o=!1),o},c=({mask:e=!1,gzip:t=!1})=>{try{return r({mask:e,gzip:t})}catch(r){return c({mask:e,gzip:t})}};e.gen=c,e.verify=e=>{let t=!0,r=[1,2,3,4,5,6,7,8,9],o=[1,2,3,4,5,6,7,8,9],n=[1,2,3,4,5,6,7,8,9];const i=[[0,0],[1,1],[0,1],[2,2],[0,2],[2,0],[1,0],[1,2],[2,1]];try{i.forEach((([t,r])=>{if(s([t,r]).forEach((t=>{if(-1===n.indexOf(e[t[0]][t[1]]))throw new Error("区域内容不合法");n.splice(n.indexOf(e[t[0]][t[1]]),1)})),n.length)throw new Error("区域内容不合法");n=[1,2,3,4,5,6,7,8,9]})),e.forEach(((t,s)=>{if(t.forEach(((t,n)=>{if(!t)throw new Error("内容不合法");if(-1===r.indexOf(e[s][n]))throw new Error("行内容不合法");if(r.splice(r.indexOf(e[s][n]),1),-1===o.indexOf(e[n][s]))throw new Error("列内容不合法");o.splice(o.indexOf(e[n][s]),1)})),r.length)throw new Error("行内容不合法");if(r=[1,2,3,4,5,6,7,8,9],o.length)throw new Error("列内容不合法");o=[1,2,3,4,5,6,7,8,9]}))}catch(e){t=!1}return t},Object.defineProperty(e,"__esModule",{value:!0})}));
